<extend name="Public:base"/>
<block name="content">
  <div class="admin-main admin-main-form has-sub" id="app" v-cloak="">
    <div class="color-orange mb-10">
      主要样式：富文本编辑器；引用ueditor，使用directives指令<br>
    </div>
    <textarea name="store_introduction" v-u-editor style="width:100%;height:360px"></textarea>
    <textarea name="store_introduction2" id="store_introduction2" v-u-editor-list style="width:100%;height:360px"></textarea>
    <div class="form-submit">
      <a class="xxbtn-primary" @click="submit">保存</a>
    </div>
  </div>
  <include file="Public:ueditor"/>
  <include file="Public:ueScript"/>
  <script>
    var ue = {}
    var ue2 = {}
    var vm = new Vue({
      el: '#app',
      data: function () {
        return {
          tabId: 1,
          info: {
            store_introduction: '<p>2</p><div>erere</div>',
            store_introduction2: '<p>2</p><div>234444</div>'
          }
        }
      },
      mounted: function () {
        this.init();
      },
      methods: {
        init: function () {
          var self = this
          self.$nextTick(function () {
            ue.ready(function () {
              ue.setContent(self.info.store_introduction);
            })
            ue2.ready(function () {
              ue2.setContent(self.info.store_introduction2);
            })
          })
        },
        changeTab: function (tid) {
          this.tabId = tid;
        },
        submit: function () {
          var self = this
         // self.info.store_introduction = ue.getContent();
        }
      },
      directives: {
        uEditor: {
          bind: function (el) {
            ue = UE.getEditor(el, {
              serverUrl: "{:U('Public/uEditor')}",
            });
            // 初始化
            ue.ready(function () {
              ue.execCommand('serverparam', {
                'type': 3,
                'from': 'ueditor',
                'domain': window.location.protocol + '//' + window.location.host
              });
            });
          }
        },
        uEditorList: {
          bind: function (el) {
            ue2 = UE.getEditor('store_introduction2', {
              serverUrl: "{:U('Public/uEditor')}",
            });
            // 初始化
            ue2.ready(function () {
              // 设置参数
              ue2.execCommand('serverparam', {
                'type': 3,
                'from': 'ueditor',
                'domain': window.location.protocol + '//' + window.location.host
              });
            });
          }
        },
      }
    })
  </script>
</block>
